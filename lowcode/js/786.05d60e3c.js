"use strict";(self["webpackChunklowcode"]=self["webpackChunklowcode"]||[]).push([[786],{5425:function(e,t,o){o.d(t,{U:function(){return a}});var n=o(1020),l=o(4870);const a=(0,n.Q_)("httpUrl",(()=>{const e=(0,l.iH)("http://124.71.232.195:8080/lowcode/#");return{url:e}}))},4659:function(e,t,o){o.d(t,{Z:function(){return p}});var n=o(3396),l=o(7139);const a={class:"item-title"};var u={__name:"FormGenerator",props:["element"],emits:["update:element-options-value","refill"],setup(e){return(t,o)=>{const u=(0,n.up)("a-input"),i=(0,n.up)("a-textarea"),s=(0,n.up)("a-radio"),p=(0,n.up)("a-radio-group"),r=(0,n.up)("a-select"),m=(0,n.up)("a-rate"),d=(0,n.up)("a-date-picker"),c=(0,n.up)("a-typography-text"),v=(0,n.up)("a-typography-paragraph"),w=(0,n.up)("a-divider");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",a,(0,l.zw)(e.element.name),1),"input"==e.element.options.type?((0,n.wg)(),(0,n.j4)(u,{key:0,value:e.element.options.value,allowClear:e.element.options.allowClear,bordered:e.element.options.bordered,placeholder:e.element.options.placeholder,showCount:e.element.options.showCount,onChange:o[0]||(o[0]=e=>t.$emit("update:element-options-value",e.target.value)),onBlur:o[1]||(o[1]=o=>e.element.refill?t.$emit("refill"):null)},null,8,["value","allowClear","bordered","placeholder","showCount"])):"textarea"==e.element.options.type?((0,n.wg)(),(0,n.j4)(i,{key:1,value:e.element.options.value,allowClear:e.element.options.allowClear,autoSize:e.element.options.autoSize,placeholder:e.element.options.placeholder,showCount:e.element.options.showCount,onChange:o[2]||(o[2]=e=>t.$emit("update:element-options-value",e.target.value))},null,8,["value","allowClear","autoSize","placeholder","showCount"])):"radio"==e.element.options.type?((0,n.wg)(),(0,n.j4)(p,{key:2,value:e.element.options.value,name:"radioGroup",onChange:o[3]||(o[3]=e=>t.$emit("update:element-options-value",e.target.value))},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.element.options.valueData,((e,t)=>((0,n.wg)(),(0,n.j4)(s,{key:t,value:e.value},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])):"select"==e.element.options.type?((0,n.wg)(),(0,n.j4)(r,{key:3,value:e.element.options.value,style:{width:"250px"},options:e.element.options.valueData,onChange:o[4]||(o[4]=e=>t.$emit("update:element-options-value",e))},null,8,["value","options"])):"rate"==e.element.options.type?((0,n.wg)(),(0,n.j4)(m,{key:4,value:e.element.options.value,style:{"background-color":"rgb(255, 255, 255)"},count:e.element.options.limit,onChange:o[5]||(o[5]=e=>t.$emit("update:element-options-value",e))},null,8,["value","count"])):"datePicker"==e.element.options.type?((0,n.wg)(),(0,n.j4)(d,{key:5,value:e.element.options.value,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",onChange:o[6]||(o[6]=e=>t.$emit("update:element-options-value",e))},null,8,["value"])):"text"==e.element.options.type?((0,n.wg)(),(0,n.j4)(v,{key:6,style:(0,l.j5)({"font-family":e.element.options.fontFamily,"font-size":e.element.options.fontSize+"px"})},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{type:e.element.options.textType},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.element.options.value),1)])),_:1},8,["type"])])),_:1},8,["style"])):"divider"==e.element.options.type?((0,n.wg)(),(0,n.j4)(w,{key:7,style:(0,l.j5)(e.element.options.style),dashed:e.element.options.dashed,orientation:e.element.options.orientation},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.element.options.value),1)])),_:1},8,["style","dashed","orientation"])):(0,n.kq)("",!0)],64)}}},i=o(89);const s=(0,i.Z)(u,[["__scopeId","data-v-27be4798"]]);var p=s},5786:function(e,t,o){o.r(t),o.d(t,{default:function(){return v}});o(7658);var n=o(3396),l=o(7139),a=o(4870),u=o(4659),i=o(4161),s=o(2483),p=o(5425);const r={class:"form-title"};var m={__name:"PublicSubmission",setup(e){const t=(0,p.U)(),o=(0,s.tv)(),m=(0,s.yj)(),d=(0,a.iH)(""),c=(0,a.iH)({title:"表单标题",content:[]});function v(){const e=[];for(let t of c.value.content)"text"!=t.options.type&&"divider"!=t.options.type&&e.push({schema:t.schema,field:t.field,value:t.options.value});return e}function w(){const e=v();i.Z.post("retrace.do",{content:e}).then((e=>{const t=e.data;let o=0;for(let n of c.value.content)"text"!=n.options.type&&"divider"!=n.options.type&&(n.options.value=t[o++].value)})).catch((e=>{console.log(e)}))}function h(){const e=v(),t=JSON.stringify(e);i.Z.post("saveData.do",{url:d.value,submission:t}).then((e=>{o.push({name:"submissionFinish"})})).catch((e=>{console.log(e)}))}return(0,n.wF)((()=>{d.value=t.url+"/user/submission/?subUrl="+m?.query?.subUrl,i.Z.get("formData.do",{params:{url:d.value}}).then((e=>{c.value=e.data,""===e.data&&o.push({name:"notFound"})})).catch((e=>{console.log(e)}))})),(e,t)=>{const o=(0,n.up)("a-layout-sider"),a=(0,n.up)("a-divider"),i=(0,n.up)("a-form-item"),s=(0,n.up)("a-form"),p=(0,n.up)("a-button"),m=(0,n.up)("a-layout");return(0,n.wg)(),(0,n.j4)(m,{class:"container"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{theme:"light",class:"main-left"}),(0,n.Wm)(m,{class:"content"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n._)("div",r,(0,l.zw)(c.value.title),1),(0,n.Wm)(a),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.value.content,((e,t)=>((0,n.wg)(),(0,n.j4)(i,{key:t,class:"item-content"},{default:(0,n.w5)((()=>[(0,n.Wm)(u.Z,{element:e,"onUpdate:elementOptionsValue":t=>e.options.value=t,onRefill:w},null,8,["element","onUpdate:elementOptionsValue"])])),_:2},1024)))),128))])),_:1}),(0,n.Wm)(p,{type:"primary",class:"submit-button",onClick:h},{default:(0,n.w5)((()=>[(0,n.Uk)(" 提交 ")])),_:1})])),_:1}),(0,n.Wm)(o,{theme:"light",class:"main-right"})])),_:1})}}},d=o(89);const c=(0,d.Z)(m,[["__scopeId","data-v-7fef2382"]]);var v=c}}]);
//# sourceMappingURL=786.05d60e3c.js.map